## Legacy C Refactoring

entry file: `grep.c`

core functions
```c
void (*build)(void);		/* compile function */
int (*match)(const char *, size_t); /* comparison function */

void init(void) {
	st_select();
	options = "bchilnrRsvwyz";   /* exe options */
}

int main(int argc, char **argv) {
  /* argument parsing */
  while ((i = getopt(argc, argv, options)) != EOF) {
    switch (i) {
    case 'E':   /* argument matching */
      Eflag |= 1;   /* set flag for each argument */
      rc_select();
      break;
    }
    // ...
  }
}
```
